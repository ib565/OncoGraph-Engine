template_id: f3_1_therapies_union_genes
family_id: F3.1
question: "Find therapies for {{ gene_symbol_a }} or {{ gene_symbol_b }}."
cypher: |
  MATCH (t:Therapy)-[r:TARGETS]->(g:Gene)
  WHERE (
    toLower(g.symbol) = toLower('{{ gene_symbol_a }}')
    OR any(s IN coalesce(g.synonyms, []) WHERE toLower(s) = toLower('{{ gene_symbol_a }}'))
    OR toLower(g.symbol) = toLower('{{ gene_symbol_b }}')
    OR any(s IN coalesce(g.synonyms, []) WHERE toLower(s) = toLower('{{ gene_symbol_b }}'))
  )
  RETURN
    g.symbol AS gene_symbol,
    t.name AS therapy_name,
    r.moa AS targets_moa,
    coalesce(r.ref_sources, []) AS ref_sources,
    coalesce(r.ref_ids, []) AS ref_ids,
    coalesce(r.ref_urls, []) AS ref_urls
  LIMIT 100
placeholders:
  gene_symbol_a:
    from: civic.genes
    sample: canonical_only
  gene_symbol_b:
    from: civic.genes
    sample: canonical_only


